<!doctype html>
<html lang="en">

<head>
     <meta charset="UTF-8">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <title>User Dashboard</title>
     <!-- Bootstrap CSS Link -->
     <!-- <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script> -->
     <script src="//code.jquery.com/jquery-1.11.1.min.js"></script> 
     <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
     <link rel="stylesheet" href="css/user_dashboard.css">
     <link rel="stylesheet" href="css/formValidation.css">
     <script src="/js/driver_registration_form.js"></script>
     <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
     <script src="/js/state_city.js"></script>
     <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
</head>
<body>
        <div class="container-fluid">
            <div class="row">
            <!-- Main Menu -->
                <div class="col-lg-3 col-md-12 col-sm-12 col-xs-12" style="background: #5359E2;"> 
                    <div id="accordian" class="menu-parent style1">
                        <ul class="menu">
                            <li class="menu-child">
                                <div class="text-center">
                                    <i class="fas fa-user-circle text-light display-2 m-4"></i><br>
                                        <span class="text-light fw-bold">Andrew</span><br>
                                        <span class="text-light fw-bold">85555555</span>
                                        <span class="text-light fw-bold">andrew@gmail.com</span><br>
                                        <span class="text-light fw-bold">852255644</span>
                                </div>
                            </li>
                            <li class="menu-child">
                                <a class="dashboard-links" onclick="dashboardChoices('my-profile')" ><i class="fas fa-user text-light fs-6"></i> &nbsp;My Profile</a>
                            </li>
                            <li class="menu-child">
                                <a href="#"><i class="fa fa-tachometer"></i> User Dashboard</a>
                                <ul>
                                    <li> 
                                        <a class="dashboard-links" onclick="showUserCurrentBookingData(); dashboardChoices('user-current-bookings')" >Current Bookings</a>
                                    </li>
                                    <li> 
                                        <a class="dashboard-links" onclick="showUserRequestedBookingData(); dashboardChoices('user-requested-bookings')" >Requested Bookings</a>
                                    </li>
                                    <li>
                                        <a class="dashboard-links" id="user-booking-history-btn" onclick="dashboardChoices('user-booking-history')" >Booking History</a>
                                    </li>
                                </ul>
                            </li>
                                <li class="menu-child">
                                    <a href="#"><i class="fa fa-tachometer"></i> Owner Dashboard</a>
                                    <ul>
                                        <li><a class="dashboard-links" onclick="showOwnerVehicles(); dashboardChoices('owner-vehicles')">My Vehicles</a></li>
                                        <li> <a class="dashboard-links" onclick="showOwnerDrivers(); dashboardChoices('owner-drivers')">My Drivers</a></li>
                                        <li> <a class="dashboard-links" onclick="showOwnerCurrentBookings(); dashboardChoices('owner-current-bookings')" id="owner-current-bookings-btn">Current Bookings</a></li>
                                        <li> <a class="dashboard-links" onclick="showBookingRequestData(); dashboardChoices('owner-booking-request');" id="owner-booking-request-btn">Booking Requests</a></li>
                                        <li> <a class="dashboard-links" onclick="dashboardChoices('owner-vehicle-booking-history')">Bookings History</a></li>
                                    </ul>
                                </li>
                    
                            <li class="menu-child">
                                <a class="dashboard-links" onclick="dashboardChoices('my-wallet')" id="wallet-dashboard"><i class="fa-solid fa-wallet" style="color: #ffffff;"></i>&nbsp; My Wallet</a>
                            </li>
                            <li class="menu-child">
                                    <a class="dashboard-links" onclick="dashboardChoices('create-password')" ><i class="fa-solid fa-key" style="color: #ffffff;"></i>&nbsp; Create Password</a>
                                    <a class="dashboard-links" onclick="dashboardChoices('change-password')" ><i class="fa-solid fa-key" style="color: #ffffff;"></i>&nbsp; Change Password</a>
                            </li>

                                <li class="">
                                    <a  class="dashboard-links" href="/user/registerowner">Become Owner</a> 
                                </li>
                                <li class="menu-child">
                                    <a class="dashboard-links" id="book-vehicle-page-btn" data-bs-toggle="modal" data-bs-target="#userRegistrationForm">Become Owner</a>
                                </li>

                            <li class="">
                                <a href="/user/logoutuser"><i class="fa fa-sign-out"></i> Logout</a>
                            </li>
                        </ul>
                    </div>
                </div>
            <!-- Main Menu -->


            <!-- User Profile Start -->
                <div class="col-lg-9 col-md-12 col-sm-12 col-xs-12 " id="my-profile" >
                    <div class="offset-lg-4 offset-md-4 col-lg-8 col-md-8 offset-sm-3 col-sm-9 col-xs-12" >
                        <img src="images/profilePic.jpeg"  width="25%" alt="" style="border-radius: 50%;" class="mt-lg-4" ><br>
                            
                            <!-- Hidden Profile image input and label -->
                            <form id="uploadprofileimage" action="/user/uploadprofileimage" method="post" enctype="multipart/form-data">
                                <input type="file" id="imageInput" name="profileimage" style="display:none;" onchange="submitFormOnChange()"  accept="image/*">
                                <label for="imageInput" class="custom-file-input-label" id="fileInputLabel"  style="margin-left: 9%; margin-top: 0;"><i class="fa-solid fa-pen-to-square" onclick="uploadProfileImage()"></i></label><br> 
                            </form>
                            <img src="uploads/<%= user.profile_img%>" alt="profile image" width="25%" class="img-fluid rounded-circle mt-lg-4" ><br>
                            <form id="uploadprofileimage" action="/user/uploadprofileimage" method="post" enctype="multipart/form-data">
                                <input type="file" id="imageInput" name="profileimage" style="display:none;" onchange="submitFormOnChange()"  accept="image/*">
                                <label for="imageInput" class="custom-file-input-label" id="fileInputLabel"  style="margin-left: 9%; margin-top: 0;"><i class="fa-solid fa-pen-to-square" onclick="uploadProfileImage()"></i></label><br> 
                            </form>
                            <label for="name" class="fw-bold fs-5 my-1">Name : </label><span class="fs-6 fw-bold ms-2"><%= user.name %></span><br>
                       
                            <label for="gender" class="fw-bold fs-5 my-1">Gender : </label><span class="fs-6 fw-bold ms-2"><%= user.gender %></span><br>
                 
                            <label for="name" class="fw-bold fs-5 my-1">Email : </label><span class="fs-6 fw-bold ms-2"><%= user.email %></span><br>
                    
                            <label for="name" class="fw-bold fs-5 my-1">Contact : </label><span class="fs-6 fw-bold ms-2"><%= user.contact_no%></span><br>
                   
                            <label for="name" class="fw-bold fs-5 my-1">Address : </label><span class="fs-6 fw-bold ms-2"><%= user.address %></span><br>
                 
                            <label for="name" class="fw-bold fs-5 my-1">City : </label><span class="fs-6 fw-bold ms-2"><%= user.city %></span><br>
                    
                            <label for="name" class="fw-bold fs-5 my-1">State : </label><span class="fs-6 fw-bold ms-2"><%= user.state %></span><br>
               
                            <label for="name" class="fw-bold fs-5 my-1">Pincode : </label><span class="fs-6 fw-bold ms-2"><%= user.pin_code %></span><br>
                
                            <label for="name" class="fw-bold fs-5 my-1">Aadhar Number : </label><span class="fs-6 fw-bold ms-2"><%= user.aadhar_number %></span><br>
          
                            <label for="name" class="fw-bold fs-5 my-1">Pan Number : </label><span class="fs-6 fw-bold ms-2"><%= user.pan_number %></span><br>
               
                            <button class="open-modal-user btn btn-primary btn-md my-5 w-50 " style="background-color: #5647F9;" data-bs-toggle="modal" data-bs-target="#userDetailsUpdateForm" data-user_details="<%=user._id%>">Update Details</button>
                            <button class="btn btn-primary button-shadow w-50 ms-2 mt-5" id="book-vehicle-page-btn" data-bs-toggle="modal" data-bs-target="#userRegistrationForm">Complete Profile</button>
                    </div>
                </div>
            <!-- User Profile End -->

         
                </div>
            <!-- User Wallet Dashboard End -->
            </div>
        </div>

    <script>
        $(document).ready(function() {
            // prevent page from jumping to top from  # href link
            $('.menu-parent li.menu-child > a').click(function(e) {
                e.preventDefault();
            });

            // remove link from menu items that have children
            $(".menu-parent li.menu-child > a").attr("href", "#");

            //  function to open / close menu items
            $(".menu-parent a").click(function() {
                var link = $(this);
                var closest_ul = link.closest("ul");
                var parallel_active_links = closest_ul.find(".active")
                var closest_li = link.closest("li");
                var link_status = closest_li.hasClass("active");
                var count = 0;

                closest_ul.find("ul").slideUp(function() {
                if (++count == closest_ul.find("ul").length)
                    parallel_active_links.removeClass("active");
                });

                if (!link_status) {
                    closest_li.children("ul").slideDown();
                    closest_li.addClass("active");
                }
            });
        });
    </script>

    <!-- Bootstrap cdn -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha384-KyZXEAg3QhqLMpG8r+O8q3D6Ors2aT1l0cC+2g1/CeZzA/J5fet5pG2i5oV5z5e5bB" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
    <script src="/js/user_dashboard.js"></script>

    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
</body>
</html>